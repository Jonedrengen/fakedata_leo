# 1: Installer r - from "https://cran.r-project.org/"
sudo apt update -qq
sudo apt install --no-install-recommends software-properties-common dirmngr
wget -qO- https://cloud.r-project.org/bin/linux/ubuntu/marutter_pubkey.asc | sudo tee -a /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc
sudo add-apt-repository "deb https://cloud.r-project.org/bin/linux/ubuntu $(lsb_release -cs)-cran40/"
sudo apt install --no-install-recommends r-base

# 2: installer docker
sudo apt install docker.io docker-compose
systemctl enable --now docker

# 3: installer SQL server "passwork=Gebt123456"
sudo docker pull mcr.microsoft.com/mssql/server:2022-latest
sudo docker run --restart=always -e "ACCEPT_EULA=Y" -e "MSSQL_SA_PASSWORD=Gebt123456" -e "TZ=Europe/Copenhagen" -p 1433:1433 --name sqlserver --hostname sqlserver -d mcr.microsoft.com/mssql/server:2022-latest

# 3.1: check om SQL server kører 
sudo docker ps 

# 4: Kopier data ind på SQL serveren - erstat "vejen til din data" ("" skal også erstattes) 
sudo docker cp "vejen til din data" sqlserver:/tmp/.

# 5: Installer Azure (Ikke ændret fra 2024)
cp /media/gebt/NO\ NAME/SQL_Course/azuredatastudio-linux-1.48.0.deb ~/Downloads/.
cd ~
sudo dpkg -i ./Downloads/azuredatastudio-linux-1.48.0.deb
Klik oppe i venstre hjørne og søg efter Azure Data Studio, højreklik og pin to dash
Åben Azure
Gå til Extensions og hent SQL Server Import

# 6: load og start den modificerede rstudio container (gennemfør 6.1, hvis dette er den første pc der sættes op)
sudo docker load -i vejen/til/rstudio_modifed
sudo docker run -d --restart=always -p 8888:8787 -e PASSWORD=password --name rstudio_modified rstudio_modified
sudo apt-get update
sudo apt-get install unixodbc-dev

# 6.1: hvis pakker ikke virker i r, selv hvis du har installeret dem så prøv
sudo apt-get update
sudo apt-get install -y build-essential

# 7: download unixodbc uden for docker container
sudo apt update
sudo apt install unixodbc unixodbc-dev odbcinst

sudo apt install libodbc1 odbcinst1debian2 odbcinst unixodbc-bin

sudo apt update
sudo ACCEPT_EULA=Y apt install msodbcsql18
sudo ACCEPT_EULA=Y apt-get install -y mssql-tools18


sudo su
curl https://packages.microsoft.com/keys/microsoft.asc | apt-key add -
curl https://packages.microsoft.com/config/ubuntu/22.04/prod.list > /etc/apt/sources.list.d/mssql-release.list
exit


# 7.1: installer pakker inden i R
#


###### possible errors and fixes ######

#install ODBC

# load fail for tidyverse when knitting
stringi needs reinstall
install.packages("stringi", type = "source")

# tidyverse does not exist in the system, even when installed. Likely beacause of missing dev tools
find missing tool on working pc (might be something like curl.h, zlib.h or some variantion of x.h)
dpkg -S tool

eksempel på computer der virker
dpkg -S zlib.h
output -> zlib1g-dev:amd64: /usr/include/zlib.h # her kan man se dev navnet "zlib1g-dev"

søg på tool navnet på pc der ikke virker
apt search zlib1g-dev

installer toolet der mangler på pc der ikke virker
sudo apt install zlib1g-dev


